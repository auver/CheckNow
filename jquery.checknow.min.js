!function(e){e.fn.checkNow=function(){function t(t,s){var a=e(t);s=s||{};var i=(s.message||r.message,s.errorClass||r.errorClass),c=s.messageClass||r.messageClass;a.each(function(t){function a(){var t=void 0!==s.required?s.required:!!o.attr("required")||!1,a=void 0!==s.type?s.type.toLowerCase():o.attr("type").toLowerCase(),r=s.pattern||o.attr("pattern"),n=s.max||o.attr("max"),l=s.min||o.attr("min"),m=s.step||o.attr("step"),d=o.val(),b=!1,f=s.message,p={email:"请输入邮箱地址",url:"请输入网址",cnmobile:"请输入手机号码",cntel:"请输入固定电话号码",cnphone:"请输入电话号码",qqnumber:"请输入QQ号码",postcode:"请输入邮政编码",number:"请输入有效数字",range:"请输入指定范围数字","default":"请正确输入"};if(f=f||p[a]||p["default"],"password"!=a&&(d=e.trim(d),o.val(d)),o.removeClass(i).next().filter("."+c).remove(),0===d.length){if(t){var g=e("<span>"+f+"</span>").attr("class",c);return u=!0,o.addClass(i).after(g),!1}return!0}switch(a){case"email":b|=!/^(?:\w+\.?\+?)*\w+@(?:\w+\.)+\w+$/.test(d);break;case"url":b|=!/((https?|ftp|mms):\/\/)?([A-z0-9]+[_\-]?[A-z0-9]+\.)*[A-z0-9]+\-?[A-z0-9]+\.[A-z]{2,}(\/.*)*\/?/.test(d);break;case"cnmobile":b=b||!/^(1[3|5|7|8|][0-9]{9})$/.test(d);break;case"cntel":b=b||!/^((\d{3,4}-)?\d{7,8})$/.test(d);break;case"cnphone":b=b||!/^((\d{3,4}-)?\d{7,8})$|^(1[3|5|7|8|][0-9]{9})$/.test(d);break;case"qqnumber":b=b||!/^([1-9][0-9]{4,})$/.test(d);break;case"postcode":b=b||!/^([1-9]\d{5}(?!\d))$/.test(d);break;case"number":b=b||d>n||l>d||d%m;break;case"range":b=b||d>n||l>d||d%m}if(void 0!=r&&(b=b||!r.test(d)),b){var g=e("<span>"+f+"</span>").attr("class",c);return u=!0,o.addClass(i).after(g),!1}return!0}var o=e(this);r.autoCheck?e(this).bind("input keyup paste",function(){a()}):r.submitButton?e(r.submitButton).bind("click",function(){alert(t),a()}):n.bind("submit",function(){a()})})}function s(e){u=!1,e.preventDefault()}var a,r,n=e(this),i={checkType:"auto",autoCheck:!1,submitButton:"",success:"",failed:"",message:null,errorClass:"checkError",messageClass:"errorMsg"};1==arguments.length?(a=arguments[0].fields,r=arguments[0].config):2==arguments.length&&(a=arguments[0],r=arguments[1]),r=e.extend({},i,r);var u=!1;if(r.submitButton?e(r.submitButton).bind("click",s):e(this).bind("submit",s),e(this).attr("novalidate","novalidate"),null!=a)for(var c in a)t(c,a[c]);else t(e(this).find("input").filter("[type!='submit']"),null)}}(jQuery);
